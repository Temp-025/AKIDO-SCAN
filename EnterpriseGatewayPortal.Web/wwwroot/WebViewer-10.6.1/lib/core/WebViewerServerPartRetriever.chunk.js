/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[13],{560:function(wa,ta,h){function pa(){return!1}function na(ba,ea,fa){if(!(ea in w))return!0;ea=w[ea];for(var x=0;x<ea.length;x++){var ca=ba;var aa=ea[x];var ma=fa;if(aa.name in ca){var ia="",ja=!1;ca=ca[aa.name];switch(aa.type){case "s":ia="String";ja=Object(la.isString)(ca);break;case "a":ia="Array";ja=Object(la.isArray)(ca);break;case "n":ia="Number";ja=Object(la.isNumber)(ca)&&Object(la.isFinite)(ca);break;case "o":ia="Object",
ja=Object(la.isObject)(ca)&&!Object(la.isArray)(ca)}ja||ma.reject('Expected response field "'+aa.name+'" to have type '+ia);aa=ja}else ma.reject('Response missing field "'+aa.name+'"'),aa=!1;if(!aa)return!1}return!0}function oa(ba){for(var ea=0,fa=["locale","excelMaxAllowedCellCount","applyPageBreaksToSheet","excelDefaultCellBorderWidth","displayChangeTracking"];ea<fa.length;ea++){var x=fa[ea],ca=x;x=x.charAt(0).toUpperCase()+x.slice(1);ba[ca]&&(Object.defineProperty(ba,x,Object.getOwnPropertyDescriptor(ba,
ca)),delete ba[ca])}return ba}h.r(ta);var ka=h(0),la=h(1);h.n(la);var ha=h(3);wa=h(55);var z=h(33),y=h(578),r=h(117),n=h(470),b=h(52),a=h(203),e=function(){function ba(){this.request=this.result=null;this.state=0;var ea=this;ea.promise=new Promise(function(fa,x){ea.resolve=function(){if(0===ea.state||4===ea.state)ea.state=1,ea.result=arguments[0],fa.apply(null,arguments)};ea.reject=function(){if(0===ea.state||4===ea.state)ea.state=2,x.apply(null,arguments)}})}ba.prototype.Rw=function(){return 1===
(this.state&1)};ba.prototype.Nta=function(){return 2===(this.state&2)};ba.prototype.Jk=function(){return!this.Nta()&&!this.Rw()};ba.prototype.jta=function(){return 4===(this.state&4)};ba.prototype.YT=function(){this.state|=4};return ba}(),f=function(){function ba(){this.zw={};this.pc=[]}ba.prototype.pop=function(){var ea=this.pc.pop();this.zw[ea.key]=void 0;return ea};ba.prototype.push=function(ea,fa){fa={key:ea,data:fa};this.pc.push(fa);this.zw[ea]=fa.data};ba.prototype.contains=function(ea){return!!this.zw[ea]};
ba.prototype.get=function(ea){return this.zw[ea]};ba.prototype.set=function(ea,fa){var x=this;this.zw[ea]=fa;this.pc.forEach(function(ca,aa){ca.key===ea&&(x.pc[aa]=ca)})};ba.prototype.remove=function(ea){var fa=this;this.zw[ea]=void 0;this.pc.forEach(function(x,ca){x.key===ea&&fa.pc.splice(ca,1)})};ba.prototype.length=function(){return this.pc.length};return ba}(),w={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],health:[],tiles:[{name:"z",
type:"n"},{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],cAnnots:[{name:"annots",type:"a"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};h=function(){function ba(ea,fa,x){var ca=this;this.HU=this.w0=!1;this.Fi=this.eL=this.sy=this.Ff=this.Kz=this.qr=this.Jz=this.Ap=
null;this.ap=new e;this.Ks=new e;this.tG=!1;this.Sg=this.Jf=this.Kf=this.Gg=null;this.ph=[];this.lH=[];this.cache={};this.timeStamp=0;this.Ai=[];this.Tk=[];this.gP=null;this.j0=!1;this.U8=this.id=null;this.LR=this.G3=pa;this.Dj=0;this.JQ=!1;this.M5=1;this.Pk={};this.ov=0;this.zx=new f;fa.endsWith("/")||(fa+="/");x=x||{};this.w0=x.disableWebsockets||!1;this.HU=x.singleServerMode||!1;null!=x.customQueryParameters&&Object(b.b)("wvsQueryParameters",x.customQueryParameters);fa.endsWith("blackbox/")||(fa+=
"blackbox/");this.Ap=x.uploadData||null;this.sy=x.uriData||null;this.Jz=x.cacheKey||null;if(this.qr=x.officeOptions||null)this.qr=oa(this.qr);this.Ff=x.rasterizerOptions||null;this.Kz=x.cadOptions||null;this.hg=fa;this.FO=ea;this.Ar(!0);this.Hv=(new y.a(fa,null,this.mj())).uoa(!this.w0,function(aa){ca.Nva(aa)},function(){return null},function(){ca.tG=!1},function(){ca.vza()})}ba.prototype.Eka=function(){var ea=this;return new Promise(function(fa,x){var ca=new XMLHttpRequest;ca.open("GET",ea.hg+"ck");
ca.withCredentials=ea.mj();ca.onreadystatechange=function(){ca.readyState===XMLHttpRequest.DONE&&(200===ca.status?fa():x())};ca.send()})};ba.prototype.uBa=function(ea){this.G3=ea||pa;this.LR=pa};ba.prototype.Sia=function(){this.q8();return this.Hv.Xs(!0)};ba.prototype.q8=function(){Object(ka.b)(this,void 0,void 0,function(){return Object(ka.d)(this,function(ea){switch(ea.label){case 0:return this.Ks=new e,this.ap=new e,this.tG=!1,this.id=null,this.j0=!1,[4,this.Eka()];case 1:return ea.ba(),[2]}})})};
ba.prototype.vza=function(){this.G3();this.q8();this.Gg&&(this.Gg.Jk()?this.Ki(this.Gg.request):this.Gg.Rw()&&this.LR(this.Gg.result.url,"pdf")&&(this.Gg=null,this.o8()));this.Sg&&this.Sg.Jk()&&this.Ki(this.Sg.request);this.Kf&&this.Kf.Jk()?this.Ki(this.Kf.request):this.Jf&&this.Jf.Jk()&&this.n3();var ea;for(ea=0;ea<this.Ai.length;ea++)this.Ai[ea]&&(this.Ai[ea].Jk()?this.Ki(this.Ai[ea].request):this.Ai[ea].Rw()&&this.LR(this.Ai[ea].result.url,"image")&&(this.Ai[ea]=null,this.VJ(Object(la.uniqueId)(),
ea)));for(ea=0;ea<this.Tk.length;ea++)this.Tk[ea]&&this.Tk[ea].Jk()&&!this.Tk[ea].jta()&&this.Ki(this.Tk[ea].request);for(ea=0;ea<this.ph.length;ea++)this.ph[ea]&&this.ph[ea].Jk()&&this.Ki(this.ph[ea].request)};ba.prototype.Isa=function(){return this.tG?Promise.resolve():(this.tG=!0,this.timeStamp=Date.now(),this.Hv.tI())};ba.prototype.AEa=function(){var ea=this,fa,x,ca,aa,ma;return new Promise(function(ia,ja){if(ea.Ap)fa=new FormData,fa.append("file",ea.Ap.fileHandle,ea.Ap.fileHandle.name),ea.qr&&
fa.append("officeOptions",JSON.stringify(ea.qr)),ea.Ff&&fa.append("rasterizerOptions",JSON.stringify(ea.Ff)),ea.Kz&&fa.append("cadOptions",ea.Kz.getJsonString()),ea.Jz&&fa.append("cacheKey",ea.Jz),x=ea.Ap.loadCallback,aa="upload",ca=ea.Ap.extension;else if(ea.sy)fa={uri:ea.sy.uri,qJa:ea.sy.shareId},fa=Object.keys(fa).map(function(sa){return sa+"="+(fa[sa]?encodeURIComponent(fa[sa]):"")}).join("&"),ma="application/x-www-form-urlencoded; charset=UTF-8",x=ea.sy.loadCallback,aa="url",ca=ea.sy.extension;
else{ia();return}var ra=new XMLHttpRequest,qa=Object(z.k)(ea.hg,"AuxUpload");qa=Object(a.a)(qa,{type:aa,ext:ca});ra.open("POST",qa);ra.withCredentials=ea.mj();ma&&ra.setRequestHeader("Content-Type",ma);ra.addEventListener("load",function(){if(ra.readyState===ra.DONE&&200===ra.status){var sa=JSON.parse(ra.response);ea.FO=sa.uri;x(sa);ia(sa)}});ra.addEventListener("error",function(){ja(ra.statusText+" "+JSON.stringify(ra))});ea.Ap&&null!=ea.Ap.onProgress&&(ra.upload.onprogress=function(sa){ea.Ap.onProgress(sa)});
ra.send(fa)})};ba.prototype.kza=function(ea){this.password=ea||null;this.ap.Rw()||(this.ap=new e,this.Ki({t:"pages"}));return this.ap.promise};ba.prototype.NC=function(ea){this.gP=ea||null;this.ap.Rw()||this.Ki({t:"pages"});return this.ap.promise};ba.prototype.Vz=function(ea){ea=Object.assign(ea,{uri:encodeURIComponent(this.FO)});this.gP&&(ea.ext=this.gP);this.Fi&&(ea.c=this.Fi);this.password&&(ea.pswd=this.password);this.Jz&&(ea.cacheKey=this.Jz);this.qr&&(ea.officeOptions=this.qr);this.Ff&&(ea.rastOptions=
this.Ff);this.Kz&&(ea.cadOptions=this.Kz.mImpl);return ea};ba.prototype.dAa=function(){0<this.zx.length()&&10>=this.ov&&this.eAa(this.zx.pop().data)};ba.prototype.dia=function(ea){0<this.zx.length()&&this.zx.contains(ea)&&this.zx.remove(ea)};ba.prototype.Ki=function(ea){ea=this.Vz(ea);this.Hv.send(ea)};ba.prototype.O8=function(ea,fa){10<this.ov?this.zx.push(ea,fa):(this.ov++,ea=this.Vz(fa),this.Hv.send(ea))};ba.prototype.eAa=function(ea){this.ov++;ea=this.Vz(ea);this.Hv.send(ea)};ba.prototype.$n=
function(ea){return ea};ba.prototype.F3=function(ea){this.HU&&ea?Object(ha.j)("Server failed health check. Single server mode ignoring check."):!this.FHa&&ea&&3>=this.Dj?(this.JQ=!0,this.Hv.Xs()):3<this.Dj&&(this.HU=!0)};ba.prototype.Nva=function(ea){var fa=this,x=ea.data,ca=ea.err,aa=ea.t;switch(aa){case "upload":ca?this.BEa.reject(ca):this.BEa.resolve("Success");break;case "pages":ca?this.ap.reject(ca):na(x,aa,this.ap)&&this.ap.resolve(x);break;case "config":if(ca)this.Ks.reject(ca);else if(na(x,
aa,this.Ks)){this.F3(x.unhealthy);x.id&&(this.id=x.id);if(x.auth){var ma=Object(b.a)("wvsQueryParameters");ma.auth=x.auth;Object(b.b)("wvsQueryParameters",ma)}x.serverVersion&&(this.eL=x.serverVersion,Object(ha.h)("[WebViewer Server] server version: "+this.eL));x.serverID?(this.Dj=x.serverID===this.U8&&this.JQ?this.Dj+1:0,this.U8=x.serverID):this.Dj=0;this.JQ=!1;this.Ks.resolve(x)}break;case "health":ca?this.Ks.reject(ca):na(x,aa,this.Ks)&&this.F3(x.unhealthy);break;case "pdf":x.url=Object(a.a)(this.hg+
"../"+encodeURI(x.url));ca?this.Gg.reject(ca):na(x,aa,this.Gg)&&this.Gg.resolve(x);break;case "ApString2Xod":x.url=Object(a.a)(this.hg+"../data/"+encodeURI(x.url));ca?this.Pk[x.rID].reject(ca):na(x,aa,this.Pk[x.rID])&&this.Pk[x.rID].resolve(x);break;case "docmod":x.url=Object(a.a)(this.hg+"../"+encodeURI(x.url));ca?this.Pk[x.rID].reject(ca):na(x,aa,this.Gg)&&this.Pk[x.rID].resolve(x);break;case "xod":if(ca)this.Kf&&this.Kf.Jk()&&this.Kf.reject(ca),this.Jf&&this.Jf.Jk()&&this.Jf.reject(ca);else if(x.notFound)x.noCreate||
this.Kf&&this.Kf.Jk()&&this.Kf.resolve(x),this.Jf&&this.Jf.Jk()&&this.Jf.resolve(x);else{x.url&&(x.url=Object(a.a)(this.hg+"../"+encodeURI(x.url)));if(!this.Jf||this.Jf.Rw())this.Jf=new e,this.Jf.request={t:"xod",noCreate:!0};this.Kf||(this.Kf=new e,this.Kf.request={t:"xod"});this.Jf.resolve(x);this.Kf.resolve(x)}break;case "cAnnots":ma=this.Sg;if(ca)ma.reject(ca);else if(na(x,aa,ma)){ma.YT();var ia=[],ja=x.annots;x=function(Ga){var Fa=ja[Ga].s,Da=ja[Ga].e,Pa=ra.hg+"../"+encodeURI(ja[Ga].xfdf),Ja=
"true"===ja[Ga].hasAppearance?Object(a.a)(Pa+".xodapp"):null,Ia=Object(la.range)(Fa,Da+1);ia[Ga]={range:Ia,promise:new Promise(function(Oa,Ra){var Ua=new XMLHttpRequest;Ua.open("GET",Object(a.a)(Pa));Ua.responseType="text";Ua.withCredentials=fa.mj();Ua.addEventListener("load",function(){Ua.readyState===Ua.DONE&&200===Ua.status&&Oa({Au:Ua.response,Nn:Ja,range:Ia})});Ua.addEventListener("error",function(){Ra(Ua.statusText+" "+JSON.stringify(Ua))});Ua.send()})}};var ra=this;for(ca=0;ca<ja.length;ca++)x(ca);
ma.resolve(ia)}break;case "annots":if(ca)this.Sg.reject(ca);else if(na(x,aa,this.Sg)){this.Sg.YT();var qa=new XMLHttpRequest;ma=this.hg+"../"+encodeURI(x.url);var sa=x.hasAppearance?Object(a.a)(ma+".xodapp"):null;qa.open("GET",Object(a.a)(ma));qa.responseType="text";qa.withCredentials=this.mj();qa.addEventListener("load",function(){qa.readyState===qa.DONE&&200===qa.status&&fa.Sg.resolve({Au:qa.response,Nn:sa})});qa.addEventListener("error",function(){fa.Sg.reject(qa.statusText+" "+JSON.stringify(qa))});
qa.send()}break;case "image":this.ov--;var ua=this.Ai[x.p];ca?ua.promise.reject(ca):na(x,aa,ua)&&(ua.result=x,ua.result.url=Object(a.a)(this.hg+"../"+encodeURI(ua.result.url)),ua.resolve(ua.result));break;case "tiles":this.ov--;ua=x.rID;ma=this.ph[ua];this.ph[ua]=null;this.lH.push(ua);if(ca)ma.reject(ca);else if(na(x,aa,ma)){for(ca=0;ca<x.tiles.length;ca++)x.tiles[ca]=Object(a.a)(this.hg+"../"+encodeURI(x.tiles[ca]));ma.resolve(x)}break;case "text":ua=this.Tk[x.p];if(ca)ua.reject(ca);else if(na(x,
aa,ua)){ua.YT();var xa=new XMLHttpRequest;x=Object(a.a)(this.hg+"../"+encodeURI(x.url));xa.open("GET",x);xa.withCredentials=this.mj();xa.addEventListener("load",function(){xa.readyState===xa.DONE&&200===xa.status&&(ua.result=JSON.parse(xa.response),ua.resolve(ua.result))});xa.addEventListener("error",function(Ga){ua.reject(xa.statusText+" "+JSON.stringify(Ga))});xa.send()}break;case "progress":"loading"===x.t&&this.trigger(r.a.Events.DOCUMENT_LOADING_PROGRESS,[x.bytes,x.total])}this.dAa();!aa&&ea.echo&&
ea&&"apstring2xod"===ea.echo.t&&(ea=ea.echo.reqID)&&(2<=parseInt(this.eL,10)?this.Pk[ea].reject("Message unhandled by server"):this.Pk[ea].reject())};ba.prototype.ipa=function(){return Object(ka.b)(this,void 0,void 0,function(){return Object(ka.d)(this,function(ea){switch(ea.label){case 0:return[4,this.Isa()];case 1:return ea.ba(),[2,this.Ks.promise]}})})};ba.prototype.Ooa=function(ea){for(var fa=this,x=new XMLHttpRequest,ca=Object(a.a)(this.hg+"aul",{id:this.id}),aa=new FormData,ma={},ia=0;ia<ea.body.length;ia++){var ja=
ea.body[ia];ma[ja.id]=ja.sN.w+";"+ja.sN.h;aa.append(ja.id,ja.sN.dataString)}ea={t:"apstring2xod",reqID:this.M5++,parts:ma};var ra=this.Vz(ea);aa.append("msg",JSON.stringify(ra));this.Pk[ra.reqID]=new e;x.open("POST",ca);x.withCredentials=this.mj;ca=new Promise(function(qa,sa){x.onreadystatechange=function(){4===x.readyState&&(200===x.status?qa():sa("An error occurred while sending down appearance strings to the server"))}});x.send(aa);return ca.then(function(){return fa.Pk[ra.reqID].promise})};ba.prototype.Wia=
function(){var ea=this.eL.split("-")[0].split("."),fa=["1","5","9"];if(3!==ea.length)throw Error("Invalid WVS version length.");if(3!==fa.length)throw Error("Invalid version length.");for(var x=0;x<ea.length;++x){if(fa.length===x||ea[x]>fa[x])return-1;if(ea[x]!==fa[x])return 1}return 0};ba.prototype.Fs=function(){return 0>=this.Wia()};ba.prototype.tP=function(){this.Sg||(this.Sg=new e,this.Fs()?this.Sg.request={t:"cAnnots"}:this.Sg.request={t:"annots"},this.Ki(this.Sg.request));return this.Sg.promise};
ba.prototype.VJ=function(ea,fa){this.Ai[fa]||(this.Ai[fa]=new e,this.Ai[fa].request={t:"image",p:fa},this.O8(ea,this.Ai[fa].request));return this.Ai[fa].promise};ba.prototype.lza=function(ea){this.Tk[ea]||(this.Tk[ea]=new e,this.Tk[ea].request={t:"text",p:ea},this.Ki(this.Tk[ea].request));return this.Tk[ea].promise};ba.prototype.mza=function(ea,fa,x,ca,aa){var ma=this.ph.length;this.lH.length&&(ma=this.lH.pop());this.ph[ma]=new e;this.ph[ma].request={t:"tiles",p:fa,z:x,r:ca,size:aa,rID:ma};this.O8(ea,
this.ph[ma].request);return this.ph[ma].promise};ba.prototype.o8=function(){this.Gg||(this.Gg=new e,this.Gg.request={t:"pdf"},this.j0?this.Gg.resolve({url:this.FO}):this.Ki(this.Gg.request));return this.Gg.promise};ba.prototype.v2=function(ea){var fa=this,x=new XMLHttpRequest,ca=Object(a.a)(this.hg+"aul",{id:this.id}),aa=new FormData,ma={};ea.annots&&(ma.annots="xfdf");ea.watermark&&(ma.watermark="png");ea.redactions&&(ma.redactions="redact");ma={t:"docmod",reqID:this.M5++,parts:ma};ea.print&&(ma.print=
!0);var ia=this.Vz(ma);aa.append("msg",JSON.stringify(ia));return Promise.all([ea.annots,ea.watermark,ea.redactions].map(function(ja){return Promise.resolve(ja)})).then(function(ja){var ra=ja[0],qa=ja[1];ja=ja[2];ra&&aa.append("annots",ra);qa&&aa.append("watermark",qa);ja&&aa.append("redactions",ja);fa.Pk[ia.reqID]=new e;x.open("POST",ca);x.withCredentials=fa.mj;ra=new Promise(function(sa,ua){x.onreadystatechange=function(){4===x.readyState&&(200===x.status?sa():ua("An error occurred while sending down annotation data to the server"))}});
x.send(aa);return ra.then(function(){return fa.Pk[ia.reqID].promise})})};ba.prototype.n3=function(){this.Jf||(this.Jf=new e,this.Jf.request={t:"xod",noCreate:!0},this.Ki(this.Jf.request));return this.Jf.promise};ba.prototype.nza=function(){this.Kf||(this.Kf=new e,this.Kf.request={t:"xod"},this.Ki(this.Kf.request));return this.Kf.promise};ba.prototype.wr=function(){return!0};ba.prototype.request=function(){};ba.prototype.C7=function(){};ba.prototype.abort=function(){for(var ea=0;ea<this.ph.length;ea++)this.ph[ea]&&
(this.ph[ea].resolve(null),this.ph[ea]=null,this.lH.push(ea));this.close()};ba.prototype.iK=function(ea){this.Fi=this.Fi||{};this.Fi.headers=ea};ba.prototype.Ar=function(ea){this.Fi=this.Fi||{};this.Fi.internal=this.Fi.internal||{};this.Fi.internal.withCredentials=ea};ba.prototype.mj=function(){return this.Fi&&this.Fi.internal?this.Fi.internal.withCredentials:null};ba.prototype.getFileData=function(){return Promise.reject()};return ba}();Object(wa.a)(h);Object(n.a)(h);Object(n.b)(h);ta["default"]=
h},578:function(wa,ta,h){var pa=h(0),na=h(3),oa=h(33),ka=h(52),la=h(203),ha=h(91),z=function(){function r(n,b,a,e,f,w){void 0===a&&(a=null);void 0===e&&(e=null);void 0===f&&(f=null);void 0===w&&(w=null);this.m5=!1;this.Dj=0;this.a_=this.XEa(n);this.url=b?this.a_+"/"+b:this.a_+"/ws";this.tO=a;this.iC=e;this.Tz=f;this.kT=w}r.prototype.XEa=function(n){var b=n.indexOf("://"),a="ws://";0>b?b=0:(5===b&&(a="wss://"),b+=3);var e=n.lastIndexOf("/");0>e&&(e=n.length);return a+n.slice(b,e)};r.prototype.send=
function(n){this.Lr.readyState===WebSocket.CLOSED||this.m5||this.Lr.send(JSON.stringify(n))};r.prototype.tI=function(){return Object(pa.b)(this,void 0,void 0,function(){var n,b=this;return Object(pa.d)(this,function(){n=Object(ka.a)("wvsQueryParameters");n.bcid=Object(oa.l)(8);Object(ka.b)("wvsQueryParameters",n);return[2,new Promise(function(a,e){var f=Object(la.a)(b.url);b.Lr=new WebSocket(f);b.Lr.onopen=function(){b.iC&&b.iC();a()};b.Lr.onerror=function(w){b.m5=!0;e(w)};b.Lr.onclose=function(w){var ba=
w.code;return Object(pa.b)(b,void 0,void 0,function(){var ea=this;return Object(pa.d)(this,function(fa){switch(fa.label){case 0:return this.Tz&&this.Tz(),3E3===ba?[3,3]:8>this.Dj++?[4,new Promise(function(x){return setTimeout(function(){return Object(pa.b)(ea,void 0,void 0,function(){return Object(pa.d)(this,function(ca){switch(ca.label){case 0:return this.kT(),[4,this.tI()];case 1:return ca.ba(),x(),[2]}})})},3E3)})]:[3,2];case 1:return fa.ba(),[3,3];case 2:e(ha.a),fa.label=3;case 3:return[2]}})})};
b.Lr.onmessage=function(w){w&&w.data&&(w=JSON.parse(w.data),w.hb?b.send({hb:!0}):w.end?close():b.tO(w))}})]})})};r.prototype.Xs=function(n){void 0===n&&(n=!1);this.Dj=0;n?this.Lr.close(3E3):this.Lr.close();return Promise.resolve()};return r}(),y=function(){function r(n,b,a,e,f,w,ba){void 0===e&&(e=null);void 0===f&&(f=null);void 0===w&&(w=null);void 0===ba&&(ba=null);this.Dj=this.UJ=this.id=0;this.mB=!1;this.request=null;n=this.uxa(n);this.url=b?n+"/"+b+"pf":n+"/pf";this.YK=a;this.tO=e;this.iC=f;
this.Tz=w;this.kT=ba}r.prototype.uxa=function(n){var b=n.lastIndexOf("/");0>b&&(b=n.length);return n.slice(0,b)};r.prototype.eka=function(n){n=n.split("\n");for(n[n.length-1]&&n.pop();0<n.length&&3>n[n.length-1].length;)"]"===n.pop()&&(this.id=0);0<n.length&&3>n[0].length&&n.shift();for(var b=0;b<n.length;++b)n[b].endsWith(",")&&(n[b]=n[b].substr(0,n[b].length-1));return n};r.prototype.A8=function(){return Object(pa.b)(this,void 0,void 0,function(){var n=this;return Object(pa.d)(this,function(b){switch(b.label){case 0:return 8>
this.Dj++?[4,new Promise(function(a){return setTimeout(function(){n.kT();n.tI();a()},3E3)})]:[3,2];case 1:b.ba(),b.label=2;case 2:return[2]}})})};r.prototype.wxa=function(n){Object(pa.b)(this,void 0,void 0,function(){var b,a;return Object(pa.d)(this,function(e){switch(e.label){case 0:b=null,a=0,e.label=1;case 1:if(!(a<n.length))return[3,6];b=JSON.parse(n[a]);if(!b)return[3,5];if(!b.end)return[3,2];close();return[3,5];case 2:if(!b.id||Number(b.id)===this.id)return[3,4];Object(na.j)("Reconnecting, new server detected");
this.Xs();return[4,this.A8()];case 3:return e.ba(),[3,5];case 4:b.hb&&Number(b.id)===this.id?this.send({hb:!0}):this.mB||this.tO(b),e.label=5;case 5:return++a,[3,1];case 6:return[2]}})})};r.prototype.Jva=function(n){Object(pa.b)(this,void 0,void 0,function(){var b,a,e;return Object(pa.d)(this,function(f){switch(f.label){case 0:if(!(3<=n.readyState))return[3,2];try{b=n.responseText.length}catch(w){return Object(na.h)("caught exception"),[2]}if(0<b)try{a=this.eka(n.responseText),0===this.id&&0<a.length&&
(e=JSON.parse(a.shift()),this.id=e.id,this.Dj=0),this.wxa(a)}catch(w){}return this.mB?[3,2]:[4,this.h1()];case 1:f.ba(),f.label=2;case 2:return[2]}})})};r.prototype.h1=function(){return Object(pa.b)(this,void 0,void 0,function(){var n=this;return Object(pa.d)(this,function(){return[2,new Promise(function(b,a){function e(){return Object(pa.b)(n,void 0,void 0,function(){return Object(pa.d)(this,function(w){switch(w.label){case 0:a(),this.Xs(),w.label=1;case 1:return this.mB&&8>this.Dj?[4,this.A8()]:
[3,3];case 2:return w.ba(),[3,1];case 3:return[2]}})})}n.request=new XMLHttpRequest;n.request.withCredentials=n.YK;var f=Object(la.a)(n.url,0!==n.id?{id:String(n.id),uc:String(n.UJ)}:{uc:String(n.UJ)});n.UJ++;n.request.open("GET",f,!0);n.request.setRequestHeader("Cache-Control","no-cache");n.request.setRequestHeader("X-Requested-With","XMLHttpRequest");n.request.onreadystatechange=function(){n.Jva(n.request)};n.request.addEventListener("error",e);n.request.addEventListener("timeout",e);n.request.addEventListener("load",
function(){n.iC&&n.iC();b()});n.request.send()})]})})};r.prototype.tI=function(){var n=Object(ka.a)("wvsQueryParameters");n.bcid=Object(oa.l)(8);Object(ka.b)("wvsQueryParameters",n);this.UJ=this.id=0;this.mB=!1;return this.h1()};r.prototype.send=function(n){var b=this,a=new XMLHttpRequest;a.withCredentials=this.YK;var e=Object(la.a)(this.url,{id:String(this.id)}),f=new FormData;f.append("data",JSON.stringify(n));a.addEventListener("error",function(){b.Xs()});a.open("POST",e);a.setRequestHeader("X-Requested-With",
"XMLHttpRequest");a.send(f)};r.prototype.Xs=function(){this.id=0;this.mB=!0;this.Tz&&this.Tz();this.request.abort();return Promise.resolve()};return r}();wa=function(){function r(n,b,a){this.I_=n;this.target=b;this.YK=a}r.prototype.uoa=function(n,b,a,e,f){void 0===n&&(n=!0);void 0===b&&(b=null);void 0===a&&(a=null);void 0===e&&(e=null);void 0===f&&(f=null);return n?new z(this.I_,this.target,b,a,e,f):new y(this.I_,this.target,this.YK,b,a,e,f)};return r}();ta.a=wa}}]);}).call(this || window)
