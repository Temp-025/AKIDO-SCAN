@model EnterpriseGatewayPortal.Web.ViewModel.DocumentIssuer.CreateDocIssuerViewModel
@{
    ViewData["Title"] = "Add";
}
@{
    await Html.RenderPartialAsync("_AlertBox");
}
<style>
    .custom-check-box {
        margin-right: 5px;
        -webkit-print-color-adjust: exact;
        vertical-align: top;
        background-repeat: no-repeat;
        background-position: 50%;
        background-size: contain;
        position: relative !important;
        width: 1.125rem;
        height: 1.125rem;
        background-color: #fff;
        border: .125rem solid rgba(0,0,0,0.3);
    }

   /*  .custom-card {
        border: 1px solid #ccc;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
        max-width: 622px;
        width: 548px;
        margin-left: 2px;
        margin-right: 20px;
    }

   
        .custom-card .card-body {
            padding: 20px;
        }

    #emailDataTable_wrapper .dataTables_filter input {
        width: 184px;
    } */

    .rounded-box {
        border: 1px solid #ccc; /* Add border color as needed */
        border-radius: 10px; /* Adjust the radius for the desired curvature */
        padding: 10px; /* Add padding inside the box */
        margin-bottom: 15px; /* Adjust spacing if needed */
    }

    .roundedbox {
        border: 1px solid #ccc; /* Add border color as needed */
        border-radius: 10px; /* Adjust the radius for the desired curvature */
        padding: 10px; /* Add padding inside the box */
        margin-bottom: 15px; /* Adjust spacing if needed */
        /* width: 551px; */
    }

    /*///////////////////////////////////////////////////////*/

    .custom-card {
        border: 1px solid #ccc;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
        max-width: 100%; /* Ensures it scales within its container */
        width: 100%; /* Set to full width of the parent container */
    }

        .custom-card .card-body {
            padding: 20px;
        }

    #businessUserDataTable {
        width: 100%; /* Ensures it scales within its parent */
        word-wrap: break-word; /* Wrap text to prevent overflow */
    }

        #businessUserDataTable th,
        #businessUserDataTable td {
            text-align: left; /* Ensure consistent alignment */
            padding: 8px; /* Adjust padding for readability */
        }

    #businessUserDataTable_wrapper .dataTables_filter input {
        width: 134px;
    }


    th, td {
        width: auto; /* Ensures consistent widths */
        text-align: left;
        padding: 8px; /* Optional for spacing */
    }

    thead th:nth-child(1),
    tbody td:nth-child(1) {
        width: 70%; /* Adjust width for the first column */
    }

    thead th:nth-child(2),
    tbody td:nth-child(2) {
        width: 30%; /* Adjust width for the second column */
    }

    .classshide {
        display: none !important;
    }
</style>
<div class="classshide">
    <div id='viewer'></div>
</div>
<div class="row">
    <div class="col-md-12">
        <div class="card-custom">
            <div class="card-body">
                <form asp-action="UpdateDocumentIssure" asp-controller="DocumentIsuuer" id="updateDocIssuerForm">
                    <div class="form-row" style="height:830px;">
                        <div class="form-group col-md-12">
                            <div class="form-group col-md-6" style="float:left;">
                                <div class="form-group">

                                    <input asp-for="id" class="form-control" tabindex="1" hidden />

                                </div>
                                <div class="form-group">
                                    <label asp-for="documentName" class="col-form-label"></label>
                                    <input asp-for="documentName" class="form-control" tabindex="1" readonly />
                                    <span asp-validation-for="documentName" class="text-danger"></span>
                                </div>
                                <div class="form-group">
                                    <fieldset style="height:120px; border: 1px solid #ccc; padding: 10px; border-radius: 5px;">
                                        <legend style="font-size:1rem; font-weight: bold;">Supported Verification Methods</legend>

                                        <label style="display: block;">
                                            <input type="checkbox" asp-for="techincal" style="margin-left:5px" class="custom-check-box" disabled="@Model.techincal" />
                                            Techincal
                                        </label>

                                        <label style="display: block;">
                                            <input type="checkbox" asp-for="qrcode" style="margin-left:5px" class="custom-check-box" disabled="@Model.qrcode" />
                                            QR Code
                                        </label>

                                        <label style="display: block;">
                                            <input type="checkbox" asp-for="trueCopyVerification" style="margin-left:5px" class="custom-check-box" disabled="@Model.trueCopyVerification" />
                                            True Copy Verification
                                        </label>
                                    </fieldset>
                                </div>
                                <div class="form-group">
                                    <label class="col-form-label">Maximum Duration For Each Verification Method @*<span class="text-danger">*</span>*@</label>
                                    <div class="rounded-box">

                                        <div class="form-group">
                                            <label asp-for="daysForTechincal"></label>
                                            <div class="row" style="position: relative;">
                                                <div class="col-md-10">
                                                    <div style="position: relative; display: inline-block; width: 121%;">
                                                        <input asp-for="daysForTechincal" class="form-control" tabindex="1" style="width: 100%; padding-right: 40px;" />
                                                        <label style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); font-size: 14px; color: #999; margin: 0;">DAYS</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <span id="daysTechnicalValidation" asp-validation-for="daysForTechincal" class="text-danger"></span>
                                        </div>
                                        <div class="form-group">
                                            <label asp-for="daysForQrcode"></label>
                                            <div class="row" style="position: relative;">
                                                <div class="col-md-10">
                                                    <div style="position: relative; display: inline-block; width: 121%;">
                                                        <input asp-for="daysForQrcode" class="form-control" tabindex="1" style="width: 100%; padding-right: 40px;" />
                                                        <label style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); font-size: 14px; color: #999; margin: 0;">DAYS</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <span id="daysQrValidation" asp-validation-for="daysForQrcode" class="text-danger"></span>
                                        </div>
                                        <div class="form-group">
                                            <label asp-for="daysForTrueCopyVerification"></label>
                                            <div class="row" style="position: relative;">
                                                <div class="col-md-10">
                                                    <div style="position: relative; display: inline-block; width: 121%;">
                                                        <input asp-for="daysForTrueCopyVerification" class="form-control" tabindex="1" style="width: 100%; padding-right: 40px;" />
                                                        <label style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); font-size: 14px; color: #999; margin: 0;">DAYS</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <span id="daysTrueCopyValidation" asp-validation-for="daysForTrueCopyVerification" class="text-danger"></span>
                                        </div>

                                    </div>
                                </div>

                                <div class="form-group">
                                    <fieldset style="height:120px; border: 1px solid #ccc; padding: 10px; border-radius: 5px;">
                                        <legend style="font-size:1rem; font-weight: bold;">Allowed Consumers</legend>

                                        <label style="display: block;">
                                            <input type="checkbox" asp-for="relayingParty" style="margin-left:5px" class="custom-check-box" disabled="@Model.relayingParty" />
                                            Relaying Party
                                        </label>

                                        <label style="display: block;">
                                            <input type="checkbox" asp-for="professional" style="margin-left:5px" class="custom-check-box" disabled="@Model.professional" />
                                            Professional
                                        </label>

                                        <label style="display: block;">
                                            <input type="checkbox" asp-for="individual" style="margin-left:5px" class="custom-check-box" disabled="@Model.individual" />
                                            Individual
                                        </label>
                                    </fieldset>
                                </div>
                               
                            </div>
                            <div class="form-group col-md-6" style="float:left;">
                                <div class="form-group">
                                    <label class="col-form-label"> Price For Each Verification Method <span class="text-danger">*</span></label>
                                    <div class="roundedbox">
                                        <div class="form-group">
                                            <label asp-for="priceForTechincal"></label>
                                            <div class="row" style="position: relative;">
                                                <div class="col-md-10">
                                                    <div style="position: relative; display: inline-block; width: 121%;">
                                                        <input asp-for="priceForTechincal" class="form-control" tabindex="1" style="width: 100%; padding-right: 40px;" readonly/>
                                                        <label style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); font-size: 14px; color: #999; margin: 0;">UGX</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <span id="priceTechicalValidation" asp-validation-for="priceForTechincal" class="text-danger"></span>
                                        </div>
                                        <div class="form-group">
                                            <label asp-for="priceForQrcode"></label>
                                            <div class="row" style="position: relative;">
                                                <div class="col-md-10">
                                                    <div style="position: relative; display: inline-block; width: 121%;">
                                                        <input asp-for="priceForQrcode" class="form-control" tabindex="1" style="width: 100%; padding-right: 40px;" readonly/>
                                                        <label style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); font-size: 14px; color: #999; margin: 0;">UGX</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <span id="priceQrValidation" asp-validation-for="priceForQrcode" class="text-danger"></span>
                                        </div>
                                        <div class="form-group">
                                            <label asp-for="priceForTrueCopyVerification"></label>
                                            <div class="row" style="position: relative;">
                                                <div class="col-md-10">
                                                    <div style="position: relative; display: inline-block; width: 121%;">
                                                        <input asp-for="priceForTrueCopyVerification" class="form-control" tabindex="1" style="width: 100%; padding-right: 40px;" readonly/>
                                                        <label style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); font-size: 14px; color: #999; margin: 0;">UGX</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <span id="priceTrueCopyValidation" asp-validation-for="priceForTrueCopyVerification" class="text-danger"></span>
                                        </div>
                                      
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label asp-for="businessUsers" class="col-form-label">Authorized Personal For Verification@*<span class="text-danger">*</span>*@</label>

                                    <div class="custom-card">

                                        <div class="card-body">

                                            <table id="businessUserDataTable" class="table table-striped custom-table">

                                                <thead>
                                                    <tr>
                                                        <th>Email</th>
                                                        <th>Select</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    @foreach (var item in Model.businessUsers)
                                                    {
                                                        <tr>
                                                            <td>@item.EmployeeEmail</td>
                                                            <td>
                                                                <input type="checkbox" class="select-checkbox" data-email="@item.EmployeeEmail">
                                                            </td>
                                                        </tr>
                                                    }
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                </div>


                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-end ">

                        <a type="button" asp-action="List" class="btn btn-danger">
                            Cancel
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    }
<script>


    $(document).ready(function () {
        $('#District').addClass('active');
        if ($('#sidebar ul li.dropdown.active')) {
            $('#sidebar ul li.dropdown.active ul').addClass('show');
            $('#eSeal').addClass('active');
            $('#sidebar ul li.dropdown.active a.nav-link.drop-logo').attr('aria-expanded', 'true');
        }
        var DocumentIssuerLink = document.getElementById('DocumentIssuerModle').querySelector('.nav-link');
        DocumentIssuerLink.click();
        /*For Beadcrum Start*/
        $('#homeMenu').addClass('breadcrumb-item').append('Document Isuuer >  Documents > View');
        $('#mainMenu').removeClass('breadcrumb-item');
        $('#subMenu').removeClass('breadcrumb-item');
        $('#DocumentsMenu').addClass('active');
        $('#networkOverlay').hide();
        var table = $("#businessUserDataTable").DataTable({
            info: false,
            lengthChange: false,
            scrollY: '225px',
            scrollCollapse: true,
            paging: false
        });

        var allowedIssuers = '@Model.allowedIssuers'; 

        var allowedIssuersArray = allowedIssuers.split(',');

        $('.select-checkbox').each(function () {
            var email = $(this).data('email');

            if (allowedIssuersArray.includes(email.trim())) {
              
                $(this).prop('checked', true);
                $(this).prop('disabled', true);
            }
        });

        
    });


</script>

