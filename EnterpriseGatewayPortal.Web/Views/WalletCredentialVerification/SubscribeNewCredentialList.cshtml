@model EnterpriseGatewayPortal.Web.ViewModel.VerifyWalletCredential.SubscribeCredentialList
@using EnterpriseGatewayPortal.Web.Models

@{
    ViewBag.Breadcrumb = new List<BreadCrumbModel>
    {
        new BreadCrumbModel { Title = "Wallet - Subscribed Credentials",Url = Url.Action("List","WalletCredentialVerification"), IconKey = "wallet-subscribedCredentials"},
        new BreadCrumbModel { Title = "Subscribe New Credential",Url = "" ,IconKey = "add"},
    };
}

@{
    ViewData["Title"] = "Wallet";
}

@{
    await Html.RenderPartialAsync("_AlertBox");
}
<style>
    .select2-container {
        width: 100% !important;
    }

        .select2-container .select2-selection--single {
            height: 35px !important;
        }

    .selection {
        width: 100% !important;
    }

    .select2-container--default .select2-selection--single .select2-selection__rendered {
        color: #555555b3;
        font-size: 14px;
        font-family: inherit;
        margin-top: 3px;
    }

    .classshide {
        display: none !important;
    }
</style>
<div class="classshide">
    <div id='viewer'></div>
</div>
<label class="sub-label">Subscribe New Credential</label>
<div class="row" id="SelectCredentialDiv">
    <div class="col-md-12 plr">
        <div class="card" style="height: 80px;z-index:1;">
            <div class="form-row" style="margin-top: 4px;">
                <div class="form-group col-md-5">

                    <select asp-for="CredentialName" class="form-control"
                            asp-items="Model.CredentialNameList">
                        <option value="">-- Select Credential --</option>
                    </select>
                    <span asp-validation-for="CredentialName" class="text-danger"></span>

                </div>
                <div class="col-md-2" style="margin-top:4px;">
                    <div class="btn-group" style="margin:-6px">


                        <a id="add" class="btn btn-primary greenButton uaeid-primary">
                            <i class="fa fa-plus">
                            </i>Subscribe Credential
                        </a>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="organizationDiv">
</div>
@section scripts {
    <script>
        var walletCertificateStatus = @Json.Serialize(ViewBag.WalletCertificateStatus);

        $(document).ready(function () {

            $("#Wallet-Manager > a")
                .attr("aria-expanded", "true")
                .addClass("active");

            $("#Wallet-Manager")
                .addClass("submenu-active show");

            $("#Wallet-Manager .submenu")
                .addClass("show");

            $('#Wallet-Subs').addClass('active');

            $('#networkOverlay').hide();

           
            $('#homeMenu').addClass('breadcrumb-item').append('Wallet > Subscribe New Credential');
            $('#mainMenu').removeClass('breadcrumb-item');
            $('#subMenu').removeClass('breadcrumb-item');
           // $("#CredentialName").select2();
            document.getElementById("navigationNetworkOverlay").style.display = "none";
            var table = $("#credentialSubscriTable").DataTable({
                "bLengthChange": false,
                "searching": true,
                "ordering": false // Use `ordering` instead of `sorting`
            });



        });

        $("#add").click(function () {
            $('#organizationDiv').empty();
            var CredentialId = $('#CredentialName').val();
            var dataToSend = { CredentialUId: CredentialId };
            $.ajax({
                url: '@Url.Action("CredentialSubscribtionDetails", "WalletCredentialVerification")',
                data: dataToSend,
                type: "GET",
                contentType: "json",
                error: ajaxErrorHandler,
                beforeSend: function () {
                    $('#overlay').show();
                },
                complete: function () {
                    $('#overlay').hide();
                },
                success: function (data) {
                    $('#SelectCredentialDiv').hide();
                    $('#organizationDiv').html(data);
                }
            });
        });

    </script>
}
